README
========

### **问题分析**

> - 区域内的动物"群落数目"可以动态增加;
> - 区域内的动物"群落位置"可以动态修改;
> - 根据给定快照id，能够快速更新群落分布;
> - 根据给定快照id，能够快速查找到当时的群落状态;
> - 具备初步的数据格式验证能力；

### **算法设计**

>  - 快速查找：为了解决快速更新群落分布的问题，该算法需要保有最新一个群落分布表，该表用于存储当前时刻的群落分布。仍然使用Hash表结构，key是动物的id，value是该动物的最新位置；
>  - 快速更新：使用Hash表存储“快照”列表，key是快照的id，value是对应的群落分布，也就是对应时刻所有动物以及动物的坐标；
>  - 数据验证：使用正则表达式验证时间格式是否正确，字段计数的方法验证动物id和位置坐标，而快照id字段没有明确指定格式，仅要求唯一，因此不做验证。

### **算法实现**
> - 文件及类说明
>> - **Community类**: 用于管理特定区域种群分布的历史信息，也就是管理快照。该类提供了检索快照，更新快照，以及数据有效性检验等初步功能，是本次任务的核心功能类；
>> - **Tester类**: 算法测试类，提供的测试用例的容器，大量测试任务可以使用该类；
>> - **main**: 用于执行简单测试用例，需要说明的是，下文中测试用例全部在主函数逐个调试；
>> - **file.txt**: 测试用例存放于该文件中，主函数通过读取该文得到测试用例。
>> - **a.out: 可执行程序

> - 更多内容请见源程序
> - 编译及执行(需要修改main.cpp中绝对路径为本地路径)
>> g++ -std=c++11 main.cpp Community.cpp Tester.cpp && ./a.out

### **测试用例**

#### 1 格式正确 & 无冲突数据
> e4e87cb2-8e9a-4749-abb6-26c59344dfee
2016/09/02 22:30:46
cat1 10 9

>351055db-33e6-4f9b-bfe1-16f1ac446ac1
2016/09/02 22:30:52
cat1 10 9 2 -1
cat2 2 3
cat3 0 1
cat4 5 3

>dcfa0c7a-5855-4ed2-bc8c-4accae8bd155
2016/09/02 22:31:02
cat1 12 8 3 4

>tbsa0c7a-5855-4ed2-bc8c-4accae8bd156
2016/09/03 22:31:09
cat1 15 12 3 4
cat3 0 1 2 3

调用 **getSnapShot** ，id = "e4e87cb2-8e9a-4749-abb6-26c59344dfee"输出
> cat1 10 9

调用 **getSnapShot** ，id = "351055db-33e6-4f9b-bfe1-16f1ac446ac1"输出
>cat1 12 8
cat2 2 3
cat3 0 1
cat4 5 3

调用 **getSnapShot** ，id = "dcfa0c7a-5855-4ed2-bc8c-4accae8bd155"输出
>cat1 15 12
cat2 2 3
cat3 0 1
cat4 5 3



#### 2 格式错误 & 无冲突数据
a. 时间格式错误
> e4e87cb2-8e9a-4749-abb6-26c59344dfee
2016/09/02 22:30:**9**
cat1 10 9
...

> e4e87cb2-8e9a-4749-abb6-26c59344dfee
2016-09-02 22:30:19
cat1 10 9
...

调用 **getSnapShot** ，id = "e4e87cb2-8e9a-4749-abb6-26c59344dfee"输出
> Invalid format

b. 坐标数据错误
> e4e87cb2-8e9a-4749-abb6-26c59344dfee
2016/09/02 22:30:19
cat1 10 9 **3**
...

调用 **getSnapShot** ，id = "e4e87cb2-8e9a-4749-abb6-26c59344dfee"输出
> Invalid format

#### 3 格式正确 & 冲突数据
> e4e87cb2-8e9a-4749-abb6-26c59344dfee
2016/09/02 22:30:46
cat1 10 9

>351055db-33e6-4f9b-bfe1-16f1ac446ac1
2016/09/02 22:30:52
cat1 10 9 2 -1
cat2 2 3
cat3 0 1
cat4 5 3

>dcfa0c7a-5855-4ed2-bc8c-4accae8bd155
2016/09/02 22:31:02
cat1 12 8 3 4

>tbsa0c7a-5855-4ed2-bc8c-4accae8bd156
2016/09/03 22:31:09
cat1 **14** **11** 3 4
cat3 0 1 2 3

调用 **getSnapShot** ，id = "e4e87cb2-8e9a-4749-abb6-26c59344dfee"输出
> Conflict found at tbsa0c7a-5855-4ed2-bc8c-4accae8bd156
